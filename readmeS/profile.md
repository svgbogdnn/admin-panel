# Профиль

Страница профиля — вспомогательный раздел для работы **с текущим авторизованным пользователем**: просмотр ключевых данных аккаунта, редактирование контактных/учебных полей и смена пароля. По объёму логики это одна из самых простых страниц в приложении.

Примеры интерфейса:

* Общий вид профиля: `imgs/Profile/Profile1.png`
* Профиль с заполненными данными: `imgs/Profile/Profile2.png`
* Вкладка «Безопасность» (смена пароля): `imgs/Profile/Profile3.png`
* Вариант/состояние формы редактирования: `imgs/Profile/Profile4.png`

---

### Где реализовано в коде

**Frontend**

* Экран: `frontend/src/pages/ProfilePage.tsx` (загрузка данных, формы «Данные» и «Безопасность», сообщения об успехе/ошибках). 
* API-обёртка: `frontend/src/api/users.ts`

  * `getCurrentUser()` → GET `/users/me`
  * `updateCurrentUser()` → PATCH `/users/me`
  * `changePassword()` → POST `/users/me/change-password` 
* Доступ к странице защищён проверкой токена в `localStorage` (роутинг не пускает без `access_token`). 

**Backend**

* Роуты текущего пользователя: `backend/app/api/v1/users.py`

  * GET `/api/v1/users/me` — вернуть текущего пользователя из токена
  * PATCH `/api/v1/users/me` — обновить профиль
  * POST `/api/v1/users/me/change-password` — сменить пароль с проверкой текущего 

---

### Что именно делает страница

#### 1) Просмотр «карточки» пользователя (слева)

В левой части показаны “сводные” поля текущего аккаунта (email, роль/статус, дата регистрации, часть пользовательских полей и список ссылок). Данные берутся из ответа GET `/api/v1/users/me`.

#### 2) Вкладка «Данные» — редактирование профиля (справа)

Форма редактирования работает по типовой схеме:

1. При открытии страницы выполняется загрузка текущего пользователя.
2. Поля формы заполняются значениями пользователя (или пустыми значениями, если данных нет). 
3. По кнопке сохранения отправляется PATCH `/api/v1/users/me` с теми полями, которые разрешено обновлять. На бэкенде поддерживаются:

* `full_name`
* `birthday`
* `nationality`
* `study_course`
* `study_group`
* `phone`
* `social_links` 

После успешного ответа профиль в интерфейсе обновляется и показывается уведомление об успехе (по смыслу — «Профиль обновлён»). 

#### 3) Вкладка «Безопасность» — смена пароля

Смена пароля выполняется отдельной формой:

* Пользователь вводит текущий пароль и новый пароль (обычно ещё и подтверждение нового пароля на фронте). 
* Фронтенд отправляет POST `/api/v1/users/me/change-password`.
* Бэкенд проверяет текущий пароль и, если он неверный, возвращает ошибку. Если верный — хеширует и сохраняет новый пароль. 

---

### Технологическая база UI (в контексте профиля)

* Интерфейс вкладок «Данные / Безопасность» реализуется через Tabs-компонент Ant Design (типовой паттерн для разделения форм в одном экране). ([axios-http.com][1])
* Вызовы API на фронтенде построены на axios; авторизационный токен обычно прокидывается через заголовок `Authorization` на уровне клиента/перехватчиков. ([axios-http.com][2])